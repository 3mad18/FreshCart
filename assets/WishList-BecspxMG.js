import{r as i,W as y,C as N,j as e,H as C,_ as r}from"./index-BtHg2gX_.js";function W(){const{getWishList:n,removeProductFromWishList:m,updateWishListCount:g}=i.useContext(y),{addProductToCart:f,setCartItemsNo:u}=i.useContext(N),[a,o]=i.useState([]),[d,c]=i.useState(null),[h,x]=i.useState(null),[j,w]=i.useState(!0);i.useEffect(()=>{async function s(){try{const t=await n();t.status==="success"?o(t.data):r.error("Failed to fetch wishlist")}catch{r.error("An error occurred while fetching wishlist")}finally{w(!1)}}s()},[n]);async function p(s){x(s);try{const t=await m(s);t.status==="success"?(o(l=>l.filter(b=>b._id!==s)),r.success("Product removed from wishlist"),await g()):r.error(t.message||"Failed to remove product from wishlist")}catch{r.error("An error occurred while removing the product")}finally{x(null)}}async function v(s){c(s);try{(await f(s)).data.status==="success"?(r.success("Product added to cart"),u(l=>l+1)):r.error("Failed to add product to cart")}catch{r.error("An error occurred while adding the product to cart")}finally{c(null)}}return j?e.jsx("div",{className:"py-8 w-full flex justify-center",children:e.jsx(C,{color:"green"})}):e.jsx("div",{className:"frame flex items-center justify-center",children:e.jsxs("div",{className:"w-full mb-6 bg-gray-100 shadow-2xl rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-6 bg-green-100 border-b border-green-300",children:[e.jsx("h1",{className:"text-4xl font-extrabold text-gray-800 text-center",children:"Wish List"}),e.jsx("p",{className:"text-center text-gray-600",children:a.length>0?e.jsxs(e.Fragment,{children:["You have ",e.jsx("span",{className:"text-green-800 font-extrabold",children:a.length})," products in your wishlist."]}):"Your wishlist is empty."})]}),e.jsx("div",{className:"p-6 my-6",children:a.length>0?a.map(s=>e.jsx("div",{className:"p-2",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-center lg:justify-between bg-white p-4 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300",children:[e.jsxs("div",{className:"flex flex-wrap justify-center lg:justify-between p-2 items-center space-x-4",children:[e.jsx("div",{children:e.jsx("img",{src:s.imageCover,className:"object-cover h-36 w-36 rounded-lg border border-gray-200",alt:s.title})}),e.jsxs("div",{className:"text-center lg:text-start p-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.title.split(" ").slice(0,3).join(" ")}),e.jsxs("p",{className:"text-lg font-semibold text-green-500",children:[e.jsx("i",{className:"fa-solid fa-coins text-green-500"})," ",s.price," EGP"]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-row-reverse space-x-reverse space-x-2 lg:flex-row lg:ml-auto justify-between w-full lg:w-auto mt-4 lg:mt-0",children:[e.jsx("button",{onClick:()=>p(s._id),disabled:h===s._id,className:"gap-3 text-red-900 bg-red-400 p-2 rounded-lg hover:text-white hover:bg-red-800 hover:border-red-600 font-medium transition-colors duration-300 w-full lg:w-auto",children:h===s._id?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin-pulse"})," ",e.jsx("span",{children:"Removing..."})]}):e.jsxs("span",{children:[e.jsx("i",{className:"fa-solid fa-trash mr-2"})," Remove"]})}),e.jsx("button",{onClick:()=>v(s._id),disabled:d===s._id,className:"text-green-800 bg-green-500 p-2 rounded-lg hover:text-white hover:bg-green-800 hover:border-green-600 font-medium transition-colors duration-300 w-full lg:w-auto",children:d===s._id?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin-pulse"})," ",e.jsx("span",{children:"Adding..."})]}):e.jsxs("span",{children:[e.jsx("i",{className:"fa-solid fa-cart-shopping mr-2"})," Add to Cart"]})})]})]})},s._id)):e.jsx("p",{className:"text-center text-gray-600",children:"Your wishlist is empty."})})]})})}export{W as default};
