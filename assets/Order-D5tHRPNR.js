import{r,C as m,j as e,H as j,a as g,y as p}from"./index-DRpRdNQ2.js";function u(){const[a,o]=r.useState([]),[i,x]=r.useState(!0),[l,c]=r.useState(null);let{getAllOrders:d}=r.useContext(m);return r.useEffect(()=>{(async()=>{try{const s=localStorage.getItem("userToken");if(s){const h=p(s),n=await d(h.id);console.log("Fetched Orders: ",n.data),o(n.data)}else c("Token not found.")}catch{c("An error occurred while fetching orders.")}finally{x(!1)}})()},[d]),e.jsxs("div",{className:"frame py-5",children:[i?e.jsx("div",{className:"py-8 w-full flex justify-center",children:e.jsx(j,{color:"green"})}):l?e.jsxs("p",{children:["Error: ",l]}):e.jsx("div",{className:"w-full mb-6 rounded-lg overflow-hidden",children:e.jsxs("div",{children:[e.jsxs("div",{className:"p-6 bg-gray-200 shadow-lg mb-4 border-gray-400",children:[e.jsx("h1",{className:"text-4xl font-extrabold text-gray-800 text-center",children:"Your All Orders"}),e.jsx("div",{className:"flex justify-between flex-wrap text-center mt-4",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-700",children:["Your Orders: ",e.jsx("span",{className:"font-bold text-gray-800",children:a.length}),e.jsx("i",{className:"fa-solid fa-bag-shopping text-gray-700 pl-2 mt-2"})]})})]}),a.length>0?a.map(t=>e.jsxs("div",{className:"order-item border border-gray-300 rounded-lg mb-4 p-4  shadow-lg",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Order ID: ",t.id]}),e.jsxs("p",{children:["Paid At: ",new Date(t.createdAt).toLocaleDateString()]}),e.jsxs("p",{children:["Payment Method: ",t.paymentMethodType==="card"?"Card":"Cash on Delivery"]}),e.jsxs("p",{children:["Total Price: ",t.totalOrderPrice," EGP"]}),e.jsx("div",{className:"w-full mt-4",children:t.cartItems&&t.cartItems.length>0?t.cartItems.map(s=>e.jsx("div",{className:"flex items-center justify-between p-2 border-b border-gray-300",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:s.product.imageCover,className:"w-16 h-16 object-cover rounded-lg",alt:s.product.name}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["Product: ",s.product.name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Name: ",s.product.title.split(" ").slice(0,2).join(" ")]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Price: ",s.price," EGP"]})]})]})},s._id)):e.jsx("p",{className:"text-center text-red-600",children:"No items in this order."})})]},t._id)):e.jsx("p",{className:"text-center text-gray-600",children:"No orders found."})]})}),e.jsxs(g,{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("title",{children:"Orders"})]})]})}export{u as default};
